<div class="container">
  <div class="raw">
    <form action="/home/write" method="POST">
      <div class="form-group">
        <label for="exampleInputEmail1">제목</label>
        <input name="title" type="text" class="form-control" id="wpzhr" placeholder="제목">
      </div>
      <div class="form-group">
        <textarea name="content" class="form-control" rows="5"></textarea>
      </div>
      <button type="submit" class="btn btn-default">글쓰기</button>
    </form>
  </div>
  <% @every_post.each do |post| %>
    <div class="well">
      <span style="font-weight:bold"><%= post.title %></span><br>
      <%= post.content %><br>
      총 단어 수 : <%=post.content.split.length%><br>
      총 글자 수 : 
      [공백포함 : <%=post.content.length%>글자] | 
      [공백미포함 : <%=post.content.gsub(/\s+/, "").length%>글자]
      <br>
      <% post.replies.each do |reply| %>
        <%= reply.content %><br>
      <% end %>
          <input name="post_id" type="hidden" class="form-control" value="<%=post.id%>">
          <textarea id="content_<%=post.id%>" name="content" class="form-control" rows="5"></textarea>
          <button value="<%=post.id%>" type="submit" class="btn btn-default reply_submit">답글달기</button>
    </div>
  <%end%>
</div>
<script>
$(".reply_submit").click(function(){
  post_id = this.value
  reply_content = $("#content_"+post_id).val()
  $.ajax({
  method: "POST",
  url: "/home/reply_write",
  data: { id_of_post: post_id, content: reply_content }
})
  .done(function( msg ) {
    alert( "답글달렸습니다." );
  });
});
</script>